@use '../constants.scss' as *;
@use './dungeon-cell-preview' as *;
@use './dungeon-cell' as *;
@use "sass:math";

$basic-grid-margin: 2px;

.wfc-ds-grid-rendered {
    --diagonal-height: #{$dungeon-cell-long-width};
    --peak-height: #{$dungeon-cell-peak-length};
    --half-width: #{$dungeon-cell-half-height};
    --flat-width: #{$dungeon-cell-flat-height};
    --rot-angle: 30deg;
    --margin-top-extra: 120rem;
}

.wfc-ds-grid-preview {
    --diagonal-height: #{$dungeon-cell-preview-diagonal-height};
    --peak-height: #{$dungeon-cell-preview-peak-height};
    --half-width: #{$dungeon-cell-preview-half-width};
    --flat-width: #{$dungeon-cell-preview-flat-width};
    --rot-angle: 0deg;
    --margin-top-extra: 0rem;
}

.wfc-ds-grid {
    display: flex;
    flex-direction: column;
    width: 600rem;
    margin-top: calc(var(--peak-height) + var(--margin-top-extra));
    transform: rotate(var(--rot-angle));
}

.wfc-ds-grid-row {
    display: flex;
    flex-direction: row;
    height: var(--diagonal-height);
    margin-top: calc(calc(var(--peak-height) * -1) + $basic-grid-margin);
}

.wfc-ds-grid-row-even {
    margin-left: var(--half-width);
}

.wfc-ds-grid-cell-container {
    margin-left: $basic-grid-margin;
    width: var(--flat-width);
    height: var(--diagonal-height);
}

.wfc-ds-grid-cell-container-outer {
    position: relative;
    width: 100%;
    height: 100%;
}

.wfc-ds-grid-cell-container-inner {
    position: absolute;
    width: 100%;
}

.wfc-ds-grid-cell-container-flag {
    position: absolute;
    padding-left: calc(var(--flat-width) * calc(2/5));
    padding-top: calc(var(--flat-width) * calc(2/5));
    color: gold;
    font-weight: bold;
    pointer-events:none;
}

.wfc-dungeon-sandbox-rendered-cell-container {
    transform: rotate(-30deg);
}
